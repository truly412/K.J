<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Page</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 추가된 CSS 스타일 */
        .marquee {
            font-size: 20px;
            color: #007BFF; /* 텍스트 색상 */
            white-space: nowrap;
            overflow: hidden;
            width: 100%;
            position: relative;
        }

        /* 히든 이벤트 메시지를 보여줄 영역 스타일 */
        #hidden-event-message {
            font-size: 24px;
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>당신의 선택</h1>
        <div id="answers"></div> <!-- 답변을 표시할 영역 -->

        <!-- 새로운 div 추가 -->
        <div id="hidden-event-message"></div>
    </div>

    <script>
        // localStorage에서 답변을 가져와 화면에 표시
        const answers = JSON.parse(localStorage.getItem('answers'));

        if (answers) {
            const answerDisplay = document.getElementById('answers');

            // 각 질문에 대한 답변을 보여줌
            const answerText = `
                <p>Q1: 당신은 김치입니까? - ${getAnswerText(answers.q1)}</p>
                <p>Q2: 당신은 배고픕니까? - ${getAnswerText(answers.q2)}</p>
                <p>Q3: 당신은 여자입니까? - ${getAnswerText(answers.q3)}</p>
            `;
            answerDisplay.innerHTML = answerText;

            // 확인 창 표시
            if (calculateTotalScore(answers) > 10) {
                // 메시지를 한 글자씩 표시하는 함수 호출
                showMessage("합산점수 10을 넘었음으로 히든 이벤트가 발생합니다");
            }
        }

        // 선택한 값에 맞는 텍스트로 변환
        function getAnswerText(value) {
            switch (value) {
                case '1': return '매우 그렇다';
                case '2': return '그렇다';
                case '3': return '아니다';
                case '4': return '매우 아니다';
                default: return '선택하지 않음';
            }
        }

        // 합산 점수를 계산하는 함수
        function calculateTotalScore(answers) {
            let totalScore = 0;
            for (let key in answers) {
                totalScore += parseInt(answers[key]); // 선택한 값들을 합산
            }
            return totalScore;
        }

        // 메시지를 한 글자씩 출력하는 함수
        function showMessage(message) {
            const messageContainer = document.getElementById('hidden-event-message');
            messageContainer.textContent = ''; // 초기화

            let index = 0; // 인덱스 초기화
            const interval = setInterval(() => {
                if (index < message.length) {
                    messageContainer.textContent += message[index]; // 한 글자 추가
                    index++;
                } else {
                    clearInterval(interval); // 모든 글자가 추가되면 인터벌 중지
                    confirmProceed(); // 확인 창 띄우기
                }
            }, 300); // 글자 추가 속도 (300ms)
        }

        // 확인 창을 띄우는 함수
        function confirmProceed() {
            const confirmProceed = confirm("이벤트를 진행 하시겠습니까?");
            if (confirmProceed) {
                alert("이벤트가 진행됩니다.");
            } else {
                alert("이벤트가 취소되었습니다.");
            }
        }
    </script>

</body>

</html>
